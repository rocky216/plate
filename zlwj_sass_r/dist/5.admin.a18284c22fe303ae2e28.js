(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{175:function(e,t,n){e.exports=n(1)(52)},181:function(e,t,n){e.exports=n(1)(158)},187:function(e,t,n){e.exports=n(1)(70)},188:function(e,t,n){"use strict";n(215);var a=n(189),r=n(0),o=n.n(r),i=n(315);t.a=function(e){var t=e.children,n=e.spinning;return o.a.createElement(a.default,{spinning:n,size:"large",delay:500,tip:"正在加载..."},o.a.createElement(i.a,{delay:300,appear:!0},t))}},189:function(e,t,n){e.exports=n(1)(115)},190:function(e,t,n){e.exports=n(1)(697)},191:function(e,t,n){e.exports=n(1)(135)},192:function(e,t,n){e.exports=n(1)(179)},193:function(e,t,n){e.exports=n(1)(180)},194:function(e,t,n){e.exports=n(1)(181)},195:function(e,t,n){e.exports=n(1)(161)},216:function(e,t,n){e.exports=n(1)(194)},217:function(e,t,n){e.exports=n(1)(354)},218:function(e,t,n){e.exports=n(1)(155)},254:function(e,t,n){e.exports=n(1)(951)},255:function(e,t,n){e.exports=n(1)(413)},256:function(e,t,n){e.exports=n(1)(347)},257:function(e,t,n){e.exports=n(1)(195)},258:function(e,t,n){e.exports=n(1)(886)},259:function(e,t,n){e.exports=n(1)(226)},260:function(e,t,n){e.exports=n(1)(418)},262:function(e,t,n){e.exports=n(1)(136)},263:function(e,t,n){e.exports=n(1)(31)},311:function(e,t,n){e.exports=n(1)(611)},312:function(e,t,n){"use strict";n(34);var a=n(35),r=(n(67),n(313)),o=(n(66),n(314)),i=(n(65),n(38)),l=(n(62),n(28)),u=(n(64),n(15)),c=(n(186),n(187)),s=n(0),p=n.n(s),f=n(848),d=n(849),y=c.default.Option;t.a=function(e){var t=e.before,n=e.data,m=e.handleSearch,h=e.initialValues,b=u.default.useForm()[0];return Object(s.useEffect)((function(){return function(){}}),[]),p.a.createElement(i.default,{size:"small"},p.a.createElement("div",{className:"flexbetween"},p.a.createElement("div",{style:{marginRight:30}},t),p.a.createElement("div",{className:"flexend",style:{minWidth:"80%"}},p.a.createElement(u.default,{form:b,layout:"inline",onFinish:function(e){m(e)},initialValues:h},p.a.createElement(o.default,null,n.map((function(e,t){return p.a.createElement(r.default,{style:{marginBottom:5},key:t},p.a.createElement(u.default.Item,{label:e.label||"",name:e.name,initialValue:e.initialValue},function(e){return e.type==l.default?p.a.createElement(l.default,null):e.type==c.default?p.a.createElement(c.default,null,e.selectList.map((function(e){return p.a.createElement(y,{key:e.id,value:e.id},e.label)}))):e.type}(e)))})),p.a.createElement(r.default,null,p.a.createElement(u.default.Item,null,p.a.createElement(a.default,{type:"primary",ghost:!0,htmlType:"submit",icon:p.a.createElement(f.a,null)},"搜索"),p.a.createElement(a.default,{className:"mgl10",onClick:function(){b.resetFields(),m(h)},icon:p.a.createElement(d.a,null)},"重置"))))))))}},313:function(e,t,n){e.exports=n(1)(79)},314:function(e,t,n){e.exports=n(1)(130)},432:function(e,t,n){e.exports=n(1)(594)},826:function(e,t,n){e.exports=n(1)(580)},830:function(e,t,n){e.exports=n(1)(598)},835:function(e,t,n){e.exports=n(1)(618)},836:function(e,t,n){var a=n(2),r=n(837);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);a(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},837:function(e,t,n){(t=n(3)(!1)).push([e.i,"",""]),e.exports=t},847:function(e,t,n){"use strict";n.r(t),n(441);var a=n(311),r=(n(34),n(35)),o=(n(431),n(432)),i=(n(62),n(28)),l=(n(186),n(187)),u=n(0),c=n.n(u),s=n(19),p=n(14),f=n(26),d=n(9),y=n(433),m=n.n(y),h=n(10),b=n.n(h),v=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{u(a.next(e))}catch(e){o(e)}}function l(e){try{u(a.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((a=a.apply(e,t||[])).next())}))},g=function(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},x=function(e,t){return function(n,a){return v(void 0,void 0,void 0,(function(){var a,r;return g(this,(function(o){switch(o.label){case 0:n({type:f.c}),o.label=1;case 1:return o.trys.push([1,3,,4]),a={url:"/zlwj/api/system/sys/sys-company/updateStatus",method:"post",data:e},[4,Object(d.d)(a)];case 2:return r=o.sent(),t&&t(r),n({type:f.a}),[3,4];case 3:return o.sent(),n({type:f.a}),[3,4];case 4:return[2]}}))}))}},E=function(e,t){return function(n,a){return v(void 0,void 0,void 0,(function(){var a,r;return g(this,(function(o){switch(o.label){case 0:n({type:f.c}),o.label=1;case 1:return o.trys.push([1,3,,4]),a={url:"/zlwj/api/system/sys/sys-company/save",method:"post",data:e},[4,Object(d.d)(a)];case 2:return r=o.sent(),t&&t(r),n({type:f.a}),[3,4];case 3:return o.sent(),n({type:f.a}),[3,4];case 4:return[2]}}))}))}},w=function(e){return function(t,n){return v(void 0,void 0,void 0,(function(){var n,a,r,o,i;return g(this,(function(l){return n=e.params,a=e.obj,r=e.next,o=e.type,i=e.refresh,function(e){v(void 0,void 0,void 0,(function(){var t,n,a,r,o,i,l,u,c,s,p,y,h,v;return g(this,(function(g){switch(g.label){case 0:t=e.options,n=e.dispatch,a=e.keyName,r=e.obj,o=e.next,i=e.type,l=e.refresh,g.label=1;case 1:return g.trys.push([1,5,,6]),u=t.url+JSON.stringify(t.data),(c=m.a.get(u))&&!l?[3,3]:(n({type:f.c}),[4,Object(d.d)(t)]);case 2:return s=g.sent(),o&&o(s),m.a.put(u,s),n(((y={type:f.a})[a]=s,y)),[3,4];case 3:r&&b.a.size(r)?(p=b.a.findIndex(c.list,(function(e){return e.id==r.id})),("edit"==i||"add"==i)&&(c.list[p]=b.a.assign(c.list[p],r)),m.a.put(u,c),n(((h={type:f.b})[a]=c,h))):n(((v={type:f.a})[a]=c,v)),g.label=4;case 4:return[3,6];case 5:return g.sent(),n({type:f.a}),[3,6];case 6:return[2]}}))}))}({options:{url:"/zlwj/api/system/sys/sys-company/page",method:"get",data:n},dispatch:t,keyName:"companys",obj:a,next:r,refresh:void 0!==i&&i,type:o}),[2]}))}))}},O=n(188),j=n(312),C=(n(823),n(826)),k=n(25),S=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{u(a.next(e))}catch(e){o(e)}}function l(e){try{u(a.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((a=a.apply(e,t||[])).next())}))},I=function(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},_=function(e,t){return function(t,n){return S(void 0,void 0,void 0,(function(){var n,a,r,o;return I(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),a=(n={url:"/zlwj/api/system/sys/sys-company/page",method:"get",data:e}).url+JSON.stringify(n.data),(r=m.a.get(a))?[3,2]:(t({type:k.c}),[4,Object(d.d)(n)]);case 1:return o=i.sent(),m.a.put(a,o),t({type:k.a,companys:o}),[3,3];case 2:t({type:k.b,companys:r}),i.label=3;case 3:return[3,5];case 4:return i.sent(),t({type:k.a}),[3,5];case 5:return[2]}}))}))}},A=function(e,t){return function(t,n){return S(void 0,void 0,void 0,(function(){var n,a,r;return I(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),a=(n={url:"/zlwj/api/system/area/cityArea",method:"get",data:e}).url+JSON.stringify(n.data),m.a.get(a)?[3,2]:(t({type:k.c}),[4,Object(d.d)(n)]);case 1:r=o.sent(),m.a.put(a,r),t({type:k.a,region:r}),o.label=2;case 2:return[3,4];case 3:return o.sent(),t({type:k.a}),[3,4];case 4:return[2]}}))}))}},z=Object(s.connect)((function(e){return{region:e.app.region}}),(function(e){return{actions:Object(p.bindActionCreators)({getRegions:A},e)}}))((function(e){var t=e.actions,n=e.region,a=e.onChange,r=e.value;return Object(u.useEffect)((function(){t.getRegions({})}),[]),c.a.createElement(C.default,{value:r,onChange:function(e){a&&a(e)},options:n,fieldNames:{label:"name",value:"code",children:"child"},placeholder:"请选择省/市/区"})})),L=[{title:"公司logo",dataIndex:"key"},{title:"公司名称",dataIndex:"name"},{title:"简称",dataIndex:"nickname"},{title:"上级公司",dataIndex:"parentName"},{title:"公司联系信息",dataIndex:"addressDetail"},{title:"系统分库",dataIndex:"zIndex"},{title:"下属项目",dataIndex:"itemCount"},{title:"系统权限",dataIndex:"systemCount"},{title:"短信",dataIndex:"smsCount"},{title:"创建信息",dataIndex:"buildTime"}],N=(n(64),n(15)),T=(n(827),n(830));function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var R,P=(R=function(e,t){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}R(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),F=function(){return(F=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},J=i.default.TextArea,D=l.default.Option,M={labelCol:{span:4},wrapperCol:{span:19}},G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.formRef=c.a.createRef(),t}return P(t,e),t.prototype.componentDidMount=function(){},t.prototype.getElement=function(e){var t;return e.type==i.default?c.a.createElement(i.default,null):e.type==J?c.a.createElement(J,null):e.type==o.default?c.a.createElement(o.default,{style:{width:"100%"}}):e.type==l.default?c.a.createElement(l.default,{showSearch:e.showSearch||!1,filterOption:e.filterOption||!1},null===(t=e.selectList)||void 0===t?void 0:t.map((function(e){return c.a.createElement(D,{key:e.id,value:e.id},e.name)}))):e.type},t.prototype.onFinish=function(e){this.props.onOk(e)},t.prototype.handleRules=function(e){return"boolean"==typeof e.rules?[{required:!0,message:e.label+"不能为空！"}]:"object"===V(e.rules)?e.rules:[]},t.prototype.render=function(){var e=this,t=this.props,n=t.visible,a=t.width,r=(t.onOk,t.onCancel),o=t.title,i=t.data,l=t.spinning;return t.initialValues,c.a.createElement(T.default,{forceRender:!0,title:o||null,visible:n,destroyOnClose:!0,width:a||520,onOk:function(){var t;return null===(t=e.formRef.current)||void 0===t?void 0:t.submit()},onCancel:r,confirmLoading:l},c.a.createElement(N.default,F({},M,{ref:this.formRef,onFinish:this.onFinish.bind(this)}),i.map((function(t,n){return c.a.createElement(N.default.Item,{key:n,label:t.label,name:t.name,initialValue:t.initialValue,rules:e.handleRules(t)},e.getElement(t))}))))},t}(c.a.Component),U=Object(s.connect)()(G),q=l.default.Option,B=Object(s.connect)((function(e){return{companys:e.app.companys}}),(function(e){return{actions:Object(p.bindActionCreators)({getCompanys:_},e)}}))((function(e){var t=e.actions,n=e.companys,a=e.onChange,r=e.value;return Object(u.useEffect)((function(){t.getCompanys({pageSize:1e3})}),[]),c.a.createElement(l.default,{showSearch:!0,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},value:r,onChange:function(e){a&&a(e)}},n?n.list.map((function(e){return c.a.createElement(q,{key:e.id,value:e.id},e.name)})):null)})),H=(n(839),n(835)),W=n(851),K=n(850),Q=n(852),X=(n(836),function(){return(X=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)}),Y=Object(s.connect)((function(e){return{utils:e.app.utils}}))((function(e){var t=e.data,n=e.utils,a=e.type,o=void 0===a?"image":a,i=e.onChange,l=e.value,s=e.more,p=void 0!==s&&s,f=Object(u.useState)(!1),d=f[0],y=f[1],m=c.a.createElement("div",null,d?c.a.createElement(W.a,null):c.a.createElement(K.a,null),c.a.createElement("div",{style:{marginTop:8}},"上传图片"));return c.a.createElement(H.default,{action:"/zlwj/api/resource/file/uploadFile",listType:"image"==o?"picture-card":"text",name:"file",fileList:l||[],onChange:function(e){if(y(!0),Array.isArray(e))return e;if(i){!p&&e.fileList&&e.fileList.length>1&&(e.fileList=[e.fileList[e.fileList.length-1]]);var t=(n=e.fileList,a=[],b.a.each(n,(function(e,t){if(e.response&&1==e.response.code){var n=e.response.data,r=n.dowloadHttpUrl,o=n.fileName,i=n.id;a.push({url:r,name:o,uid:i})}else a.push(e)})),a);return i(t),y(!1),t}var n,a},showUploadList:!0,onRemove:function(e){var t=b.a.filter(l,(function(t){return t.url!=e.url}));i(t)},data:X({token:n.getToken()},t)},d,"image"==o?m:c.a.createElement(r.default,{size:"small",icon:d?c.a.createElement(W.a,null):c.a.createElement(Q.a,null)},"上传附件"))})),Z=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),$=function(){return($=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},ee=l.default.Option,te=i.default.TextArea,ne={current:1,name:"",province:"",city:"",area:"",status:""},ae=function(e){function t(t){var n=e.call(this,t)||this;return n.state={addVisible:!1},n}return Z(t,e),t.prototype.componentDidMount=function(){this.props.actions.getCompanys({params:ne})},t.prototype.handleSearch=function(e){},t.prototype.changeStatus=function(e){var t=this;this.props.actions.updateCompanyStatus({id:e.id},(function(e){t.props.utils.OpenNotification("success"),t.props.actions.getCompanys({params:ne,obj:e,type:"edit",refresh:!0})}))},t.prototype.getCol=function(){var e=this;return function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,l=o.length;i<l;i++,r++)a[r]=o[i];return a}(L,[{title:"状态",dataIndex:"status",render:function(t,n){return c.a.createElement(l.default,{size:"small",value:t,onChange:e.changeStatus.bind(e,n)},c.a.createElement(ee,{value:1},"有效"),c.a.createElement(ee,{value:0},"无效"))}}])},t.prototype.submitAdd=function(e){this.props.actions.addCompany($($({},e),{logo:this.props.utils.submitFiles(e.logo),companyAddress:e.companyAddress.join()}))},t.prototype.render=function(){var e=this,t=this.props,n=t.spinning,u=t.utils,s=t.companys,p=this.state.addVisible;return c.a.createElement(O.a,{spinning:n},c.a.createElement(U,{spinning:n,title:"新增公司",data:[{label:"公司Logo",name:"logo",type:c.a.createElement(Y,{data:{resourceType:"0",fileType:"photo",linkType:"logo",fileSize:10240,isFlag:0}})},{label:"公司名称",name:"name",type:i.default,rules:!0},{label:"公司简称",name:"nickname",type:i.default,rules:!0},{label:"上级公司",name:"parentId",type:c.a.createElement(B,null)},{label:"省/市/区",name:"companyAddress",type:c.a.createElement(z,null),rules:!0},{label:"公司地址",name:"addressDetail",type:te,rules:!0},{label:"经度",name:"longitude",type:o.default},{label:"纬度",name:"latitude",type:o.default},{label:"备注",name:"remark",type:te}],visible:p,onCancel:function(){return e.setState({addVisible:!1})},onOk:this.submitAdd.bind(this)}),c.a.createElement("div",{key:"a"},c.a.createElement(j.a,{before:c.a.createElement(r.default,{type:"primary",onClick:function(){return e.setState({addVisible:!0})}},"新增"),initialValues:ne,data:[{label:"公司名称",name:"name",type:i.default},{label:"省/市/区",name:"region",type:c.a.createElement(z,null)},{label:"状态",name:"status",type:l.default,selectList:[{label:"全部",id:""},{label:"有效",id:1},{label:"无效",id:0}]}],handleSearch:this.handleSearch.bind(this)})),c.a.createElement("div",{key:"b"},c.a.createElement(a.default,{size:"small",columns:this.getCol(),dataSource:s?u.addIndex(s.list,!0):[],pagination:u.Pagination(s,(function(t){ne.current=t,e.props.actions.getCompanys(ne)}))})))},t}(c.a.Component);t.default=Object(s.connect)((function(e){return{companys:e.company.companys,spinning:e.company.spinning,utils:e.app.utils}}),(function(e){return{actions:Object(p.bindActionCreators)({getCompanys:w,addCompany:E,updateCompanyStatus:x},e)}}))(ae)}}]);